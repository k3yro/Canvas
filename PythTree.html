<!DOCTYPE html>
<html lang="de">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Titel</title>
</head>

<body>
	<canvas id="canvas2d" width="800" height="600" style="border:1px solid"></canvas>
	<table>
		<tr>
			<td></td>
			<td id="log"></td>
		</tr>
	</table>
	<script>

		const canvas = document.getElementById('canvas2d');
		const context = canvas.getContext('2d');
	
		let circlePosX = canvas.width / 2;
		let circlePosY = canvas.height / 2;

		let tanphi = Math.tan(40 * Math.PI/180);
	
		function paintTree(x1, y1, x2, y2, level)
		{
			if (level <= 0) {
				return;
			}
			level--;

			let dx = x2 - x1;
			let dy = y1 - y2;
			let x3 = x1 - dy;
			let y3 = y1 - dx;
			let x4 = x2 - dy;
			let y4 = y2 - dx;

			context.beginPath();
			context.moveTo(x1, y1);
			context.lineTo(x2, y2);
			context.stroke(); 

			context.lineTo(x4, y4);
			context.stroke(); 

			context.lineTo(x3, y3);
			context.stroke(); 

			context.moveTo(x1, y1);
			context.lineTo(x3, y3);
			context.stroke(); 
			
			let v = ((x3 + x4) / 2 - (dy/2 * tanphi));
			let w = ((y3 + y4) / 2 - (dx/2 * tanphi));

			if((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2) > 2) {
				paintTree(x3,y3,v,w, level);
				paintTree(v,w,x4,y4, level);
			}
		}

		paintTree(350, 500, 450, 500, 10);

	</script>
</body>

</html>